(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{340:function(e,t,s){"use strict";s.r(t);var a=s(6),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"mac-开启-k8s"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mac-开启-k8s"}},[e._v("#")]),e._v(" Mac 开启 k8s")]),e._v(" "),s("p",[e._v("因为墙存在的原因，所以得变通下安装的方法，这个时候请参考"),s("a",{attrs:{href:"https://github.com/maguowei/k8s-docker-for-mac",target:"_blank",rel:"noopener noreferrer"}},[e._v("maguowei/k8s-docker-for-mac"),s("OutboundLink")],1),e._v("上的解决办法，通过使用国内的镜像源和预先下载好镜像，并且主要一定要使用"),s("code",[e._v("Edge")]),e._v("版本的"),s("code",[e._v("Docker")])]),e._v(" "),s("h2",{attrs:{id:"helm-的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-的安装"}},[e._v("#")]),e._v(" Helm 的安装")]),e._v(" "),s("p",[s("code",[e._v("Helm")]),e._v("大部分的安装都可以按照文档进行处理，但是提示"),s("code",[e._v("tiller")]),e._v("需要升级，并且发现"),s("code",[e._v("titler")]),e._v("不能启动，这个时候会提示拉不到这个镜像，解决办法是先查看镜像的版本是多少：")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("kubectl describe pod tiller-deploy-668c95696c-jtnb9 -n kube-system\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("然后使用[azure]("),s("a",{attrs:{href:"http://mirror.azure.cn/help/gcr-proxy-cache.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://mirror.azure.cn/help/gcr-proxy-cache.html"),s("OutboundLink")],1),e._v("的镜像将其获取下来，最后修改"),s("code",[e._v("deploment")]),e._v("中的镜像数据：")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 获取对应版本的 Tiller")]),e._v("\ndocker pull gcr.azk8s.cn/kubernetes-helm/tiller:v2.14.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 获取当前 Tiller 的 deployment 然后修改其中的数据")]),e._v("\nkubectl get deployment tiller-deploy -n kube-system -o yaml "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" tiller-deploy.yml\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 删除原有的 deployment")]),e._v("\nkubectl delete deployment tiller-deploy -n kube-system\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 使用修改后的 deployment")]),e._v("\nkubectl apply -f tiller-deploy.yml\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br")])]),s("h2",{attrs:{id:"windows-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows-安装"}},[e._v("#")]),e._v(" Windows 安装")]),e._v(" "),s("p",[e._v("在"),s("code",[e._v("Windows")]),e._v("上安装"),s("code",[e._v("kubernetes")]),e._v("的安装的主体流程和在"),s("code",[e._v("Mac")]),e._v("上安装差不多，但是遇到的问题也是措手不及的，首先需要将配置中的"),s("code",[e._v("DNS")]),e._v("又原来的"),s("code",[e._v("automatic")]),e._v("改成"),s("code",[e._v("fix")]),e._v("并建议设置成"),s("code",[e._v("114.114.114.114")]),e._v("，然后在系统防火墙中的出入站规则中加入一个出站规则，入站的两个规则已经在安装的时候创建成功了，加入的是"),s("code",[e._v("vpnkit")]),e._v("这个程序的规则。")]),e._v(" "),s("p",[e._v("最主要的一点是，安装中出现问题，可以到"),s("code",[e._v("C:\\Program Data\\DockerDesktop\\service.txt")]),e._v("中查看相关报错并解决。")])])}),[],!1,null,null,null);t.default=r.exports}}]);